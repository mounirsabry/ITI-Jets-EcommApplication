<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile | Book Alley</title>

    <link rel="stylesheet" href="CSS/Common/reset.css" />
    <link rel="stylesheet" href="CSS/Common/root.css" />
    <link rel="stylesheet" href="CSS/Common/header.css" />
    <link rel="stylesheet" href="CSS/Common/footer.css" />
    <link rel="stylesheet" href="CSS/Common/main.css" />
    <link rel="stylesheet" href="CSS/Common/MessagePopup.css" />

    <link rel="stylesheet" href="CSS/profile.css" />

    <script src="JavaScript/Common/context_path.js"></script>

    <script defer type="module" src="JavaScript/Common/header.js"></script>
    <script defer type="module" src="JavaScript/Common/footer.js"></script>

    <script defer type="module" src="JavaScript/profile.js"></script>
  </head>
  <body>
    <header id="siteHeader">
      <!-- Header will be injected here by JS -->
    </header>

    <main>
      <div class="popup-overlay">
        <!-- Will be controlled by JS -->
      </div>

      <div class="profile-actions">
        <button id="viewOrders">View Orders</button>
        <button id="viewPurchaseHistory">View Purchase History</button>
        <button id="viewWishList">View Wish List</button>
      </div>

      <h1 class="center-title">My Profile</h1>

      <!-- Change Password Section -->
      <section id="changePasswordSection">
        <button id="openChangePasswordPopupButton">Change Password</button>
      </section>

      <!-- Change Password Popup -->
      <div id="passwordPopup" class="popup hidden">
        <div class="popup-content">
          <h2>Change Password</h2>
          <p id="passwordChangeError" class="error"></p>
          <label for="currentPassword">Current Password:</label>
          <input type="password" id="currentPassword" required />

          <label for="newPassword">New Password:</label>
          <input type="password" id="newPassword" required />

          <label for="confirmPassword">Confirm New Password:</label>
          <input type="password" id="confirmPassword" required />

          <div class="popup-buttons">
            <button id="confirmPasswordChangeButton">Change</button>
            <button id="cancelPasswordChangeButton">Cancel</button>
          </div>
        </div>
      </div>

      <!-- Email Section -->
      <section id="emailSection">
        <p>
          <strong>Email:</strong>
          <span id="displayEmail"><!-- email will be written here by JavaScript --></span>
        </p>
        <button id="openChangeEmailPopupButton">Update Email</button>
      </section>

      <!-- Email Update Popup -->
      <div id="emailPopup" class="popup hidden">
        <div class="popup-content">
          <h2>Update Email</h2>
          <p id="emailChangeError" class="error">
            <!-- Error message will be injected here by JS when needed. -->
          </p>
          <label for="newEmail">New Email:</label>
          <input
            type="email"
            id="newEmail"
            placeholder="Enter new email"
            required
          />
          <div class="popup-buttons">
            <button id="confirmEmailUpdate">Confirm</button>
            <button id="cancelEmailUpdate">Cancel</button>
          </div>
        </div>
      </div>

      <!-- Profile Information -->
      <section id="profileInfo" class="profile-section">
        <h2>Update Profile Info</h2>
        <form id="editProfileForm">
          <label for="editUserName">User Name:</label>
          <input type="text" id="editUserName" required />

          <label for="editPhone">Phone:</label>
          <input type="tel" id="editPhone"  required />

          <label for="editAddress">Address:</label>
          <input type="text" id="editAddress" required />

          <label for="editBirthDate">Birth Date:</label>
          <input type="date" id="editBirthDate" required />

          <p id="profileChangesError" class="error">
            <!-- Error message will be injected here by JS when needed. -->
          </p>
          <button type="submit">Save Changes</button>
        </form>
      </section>
    </main>

    <footer id="siteFooter">
      <!-- Footer will be injected here by JS -->
    </footer>
  </body>
</html>
